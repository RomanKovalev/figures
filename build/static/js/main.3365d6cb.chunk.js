(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(6),o=n.n(i),s=n(3),u=n(4),c=n(8),l=n(7),f=n(9),p=(n(16),function(e){var t=e.state,n=e.onMouseDown,r=e.onDragStart;return a.a.createElement("div",{className:"area",draggable:t.draggable,onDragStart:function(e){return r(e,t.id)},style:{top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"}},a.a.createElement("div",{className:"corner left-top",onMouseDown:function(e){return n(e,t.id)}}),a.a.createElement("div",{className:"corner right-top",onMouseDown:function(e){return n(e,t.id)}}),a.a.createElement("div",{className:"corner left-bottom",onMouseDown:function(e){return n(e,t.id)}}),a.a.createElement("div",{className:"corner right-bottom",onMouseDown:function(e){return n(e,t.id)}}))}),h=n(1),d=n.n(h),g=n(2),v=function(){function e(){Object(s.a)(this,e),this._apiBase="http://127.0.0.1:8000/api/"}return Object(u.a)(e,[{key:"getResource",value:function(){var e=Object(g.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getFigures",value:function(){var e=Object(g.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource(this._apiBase+"list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"accessResource",value:function(){var e=Object(g.a)(d.a.mark(function e(t,n,r){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:r,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"postFigure",value:function(){var e=Object(g.a)(d.a.mark(function e(t){var n,r,a=arguments;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:this._apiBase+"list",e.next=3,this.accessResource(t,n,"POST");case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delFigures",value:function(){var e=Object(g.a)(d.a.mark(function e(){var t,n,r=arguments;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this._apiBase+"list",e.next=3,this.accessResource(null,t,"DELETE");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateFigure",value:function(){var e=Object(g.a)(d.a.mark(function e(t,n){var r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._apiBase+"update/"+n+"/",e.next=3,this.accessResource(t,r,"PATCH");case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),m=(n(18),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).fetchService=new v,e.state={items:[],resizer:null},e.onDrop=function(t){t.preventDefault();var n=t.dataTransfer.getData("id"),r=e.state.items.filter(function(e){return e.id==n});if(r[0]){var a,i,o,s;if(a=r[0].width,i=r[0].height,console.log(r[0].offsetx),"corner left-top"===e.state.resizer)a=r[0].width-(t.clientX-r[0].left),i=r[0].height-(t.clientY-r[0].top),s=t.clientX,o=t.clientY;else if("corner right-top"===e.state.resizer)a=r[0].width-(r[0].offsetx-t.clientX),o=t.clientY,i=r[0].height-(t.clientY-r[0].top),s=r[0].left;else if("corner left-bottom"===e.state.resizer)a=r[0].width-(t.clientX-r[0].left),s=t.clientX,i=r[0].height-(r[0].offsety-t.clientY),o=r[0].top;else if("corner right-bottom"===e.state.resizer)a=r[0].width-(r[0].offsetx-t.clientX),i=r[0].height-(r[0].offsety-t.clientY),o=r[0].top,s=r[0].left;else{var u=t.dataTransfer.getData("text/plain").split(",");s=t.clientX+parseInt(u[0],10),o=t.clientY+parseInt(u[1],10)}var c={left:s,top:o,width:a,height:i};return e.updateFigure(c,n),e.getFigures(),e.setState({resizer:null}),!1}},e.onDragOver=function(e){e.preventDefault()},e.onMouseUp=function(e){e.preventDefault()},e.onDragStart=function(e,t){var n=window.getComputedStyle(e.target,null);e.dataTransfer.setData("text/plain",parseInt(n.getPropertyValue("left"),10)-e.clientX+","+(parseInt(n.getPropertyValue("top"),10)-e.clientY)),e.dataTransfer.setDragImage(e.target,window.outerWidth,window.outerHeight),e.dataTransfer.setData("id",t)},e.onMouseDown=function(t,n){var r=t.clientX,a=t.clientY;e.setState({resizer:t.target.className});var i={offsetx:r,offsety:a};return e.updateFigure(i,n),!1},e.delAll=function(){e.delFigures()},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},e.addFigure=function(){var t={left:e.getRandomInt(10,900),top:e.getRandomInt(10,900),width:e.getRandomInt(40,300),height:e.getRandomInt(40,300),draggable:!0,offsetx:0,offsety:0};e.postFigure(t),e.getFigures()},e.getFigures(),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"getFigures",value:function(){var e=this;this.fetchService.getFigures().then(function(t){e.setState({items:t})})}},{key:"postFigure",value:function(e){var t=this;this.fetchService.postFigure(e).then(function(e){t.getFigures()})}},{key:"delFigures",value:function(){var e=this;this.fetchService.delFigures().then(function(t){e.getFigures()})}},{key:"updateFigure",value:function(e,t){var n=this;this.fetchService.updateFigure(e,t).then(function(e){n.getFigures()})}},{key:"render",value:function(){var e=this,t=this.state.items.map(function(t){return a.a.createElement(p,{state:t,key:t.id,onDragStart:e.onDragStart,onMouseDown:e.onMouseDown})});return a.a.createElement("div",null,a.a.createElement("div",{className:"container-drag"},a.a.createElement("div",{className:"wrapper",onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){return e.onDrop(t)},onMouseUp:function(t){return e.onMouseUp(t)}},a.a.createElement("div",{className:"bnt-wrapper"},a.a.createElement("button",{onClick:this.addFigure},"Add +"),a.a.createElement("br",null),a.a.createElement("button",{onClick:this.delAll},"Clear all")),t)))}}]),t}(r.Component));o.a.render(a.a.createElement(m,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.3365d6cb.chunk.js.map